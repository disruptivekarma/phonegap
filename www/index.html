<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style type="text/css">
            html, body {
                height: 100%;
                width: 100%;
                background-color: #3ca;
            }
        </style>
        <script src="phonegap.js"></script>
        <script src="index.js"></script>
        <script>
            document.addEventListener("deviceready", onDeviceReady, false);

            function onDeviceReady() {
                var req = new XMLHttpRequest(),
                    url = "http://dev.scrollback.io/s/client.phonegap.html",
                    scriptString = "<script>$.ready();app.initialize();libsb.emit('navigate', { phonegap: true });<\/script>";

                req.onreadystatechange = function() {
                    if (req.readyState === 4) {
                        if (req.status === 200) {
                            clientString = req.response;

                            if (clientString) {
                                clientString = clientString.replace("<!-- phonegap scripts -->", scriptString);

                                document.write(clientString);
                            } else {
                                console.error("Response is empty for " + url + ".");
                            }
                        } else {
                            console.error("AJAX request failed for " + url + ".");
                        }
                    }
                };

                req.open("GET", url, true);
                req.send();
            }
        </script>
    </head>

    <body>
    </body>
</html>

